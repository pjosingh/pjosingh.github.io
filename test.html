<html>



<head>

    <script type="text/javascript">
        function fetchAndStoreIp() {
            var requestUrl = "http://ip-api.com/json";

            $.ajax({
                url: requestUrl,
                type: 'GET',
                success: function(json)
                {
                    console.log("My country is: " + json.query);
                    console.log("My country is: " + json.city);
                    console.log("My country is: " + json.isp);

                    $.ajax({
                        url: 'http://34.211.102.39:8080/users',
                        type: "POST",
                        contentType: "application/json",

                        data: '{"name":"'+json.query+'"}',
                        dataType: "json",
                        success: function (result) {
                            console.log(result);
                        },
                        error: function () {
                            console.log("error");
                        }
                    });
                },
                error: function(err)
                {
                    console.log("Request failed, error= " + err);
                }
            });
        }
    </script>
</head>



<body onload="fetchAndStoreIp()">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>

    function saveSettings() {
        document.getElementById("textbox1").value;
        console.log("Hello world -> "+document.getElementById("textbox1").value);
        sendRequest();
    }

    function sendRequest() {
        // var http = new XMLHttpRequest();
        // var url = 'localhost:8080/employees';
        // var params = 'name=ipsum&role=binny';
        // http.open('POST', url, true);

        // //Send the proper header information along with the request
        // http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

        // http.onreadystatechange = function() {//Call a function when the state changes.
        //     if(http.readyState == 4 && http.status == 200) {
        //         alert(http.responseText);
        //     }
        // }
        // http.send(params);


        // var xhttp = new XMLHttpRequest();
        // xhttp.onreadystatechange = function() {
        // if (this.readyState == 4 && this.status == 200) {
        //   document.getElementById("demo").innerHTML = this.responseText;
        // }
        // };
        // xhttp.open("GET", "http://localhost:8080/employees", true);
        // xhttp.send();


        // $.ajax({
        //     url: 'http://localhost:8080/employees',
        //     headers: {
        //         'Content-Type': 'application/x-www-form-urlencoded'
        //     },
        //     type: "POST", /* or type:"GET" or type:"PUT" */
        //     dataType: "json",
        //     data: {
        //     	name:"hello",
        //     	role:"world"
        //     },
        //     success: function (result) {
        //         console.log(result);
        //     },
        //     error: function () {
        //         console.log("error");
        //     }
        // });

        $.ajax({
            url: 'http://localhost:8080/employees/1',
            type: "GET",
            contentType: "application/json",

            data: {},
            dataType: "json",
            success: function (result) {
                console.log(result);
            },
            error: function () {
                console.log("error");
            }
        });

        $.ajax({
            url: 'http://localhost:8080/employees',
            type: "POST",
            contentType: "application/json",

            data: '{"name":"hello", "role":"world"}',
            dataType: "json",
            success: function (result) {
                console.log(result);
            },
            error: function () {
                console.log("error");
            }
        });




        var requestUrl = "http://ip-api.com/json";

        $.ajax({
            url: requestUrl,
            type: 'GET',
            success: function(json)
            {
                console.log("My country is: " + json.query);
                console.log("My country is: " + json.city);
                console.log("My country is: " + json.isp);
            },
            error: function(err)
            {
                console.log("Request failed, error= " + err);
            }
        });
        // const proxyurl = "https://cors-anywhere.herokuapp.com/";
        // const url = "https://example.com"; // site that doesn’t send Access-Control-*
        // fetch(proxyurl + url) // https://cors-anywhere.herokuapp.com/https://example.com
        // .then(response => response.text())
        // .then(contents => console.log(contents))
        // .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))

    }

</script>
<h2>Test Login screen </h2>


<input type="text" id="textbox1"/> </td><td><button onclick="saveSettings()">Click
    me</button>

</body>


</html>